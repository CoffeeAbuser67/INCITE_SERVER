import{o as F,ak as L,a as i,v as k,al as T,c as V,$ as A,am as B,j as e,L as j,i as l,t as c,p as d,ac as G,R as M,an as O,q as b}from"./index-BbnLkFbA.js";import{o as v}from"./card-A99miB_4.js";import{i as I}from"./aspect-ratio-CDnyWZx7.js";import{r as h}from"./heading-edCDQISV.js";import{o as U}from"./separator-B4fbzUw-.js";import{C as Q,u as H,g as J,y as K,h as W,v as z}from"./select-BFV75yO_.js";const X=["div","span"],Y=["none","inline-grid","grid"],Z=["1","2","3","4","5","6","7","8","9"],ee=["1","2","3","4","5","6","7","8","9"],se=["row","column","dense","row-dense","column-dense"],te=["start","center","end","baseline","stretch"],ae=["start","center","end","between"],_={as:{type:"enum",values:X,default:"div"},...F,display:{type:"enum",className:"rt-r-display",values:Y,responsive:!0},areas:{type:"string",className:"rt-r-gta",customProperties:["--grid-template-areas"],responsive:!0},columns:{type:"enum | string",className:"rt-r-gtc",customProperties:["--grid-template-columns"],values:Z,parseValue:P,responsive:!0},rows:{type:"enum | string",className:"rt-r-gtr",customProperties:["--grid-template-rows"],values:ee,parseValue:P,responsive:!0},flow:{type:"enum",className:"rt-r-gaf",values:se,responsive:!0},align:{type:"enum",className:"rt-r-ai",values:te,responsive:!0},justify:{type:"enum",className:"rt-r-jc",values:ae,parseValue:re,responsive:!0},...L};function P(s){return _.columns.values.includes(s)?s:s!=null&&s.match(/^\d+$/)?`repeat(${s}, minmax(0, 1fr))`:s}function re(s){return s==="between"?"space-between":s}const S=i.forwardRef((s,x)=>{const{className:u,asChild:g,as:w="div",...f}=k(s,_,B,A);return i.createElement(g?T:w,{...f,ref:x,className:V("rt-Grid",u)})});S.displayName="Grid";const ie=s=>s?new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"long",year:"numeric"}).format(new Date(s)):"Data indisponível",ne=({post:s})=>e.jsx(j,{to:`/blog/${s.id}`,className:"no-underline text-current hover:text-current h-full",children:e.jsxs(v,{className:"h-full transform hover:-translate-y-1 transition-transform duration-300 flex flex-col",children:[e.jsx(l,{children:e.jsx(I,{ratio:16/9,children:e.jsx("img",{src:s.imagem_destaque||"https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?w=800",alt:`Imagem para ${s.title}`,className:"w-full h-full object-cover rounded-md"})})}),e.jsxs(l,{p:"3",className:"flex-grow flex flex-col justify-between",children:[e.jsx(h,{as:"h3",size:"4",mt:"2",truncate:!0,children:s.title}),s.resumo&&e.jsx(c,{as:"p",size:"2",color:"gray",mt:"1",className:"line-clamp-3 flex-grow",children:s.resumo}),e.jsxs(d,{align:"center",gap:"2",mt:"3",children:[e.jsx(c,{size:"2",weight:"bold",color:"jade",children:s.instituicao_nome||"INCITE AF"}),e.jsxs(c,{color:"gray",size:"2",children:["· ",ie(s.created_at)]})]})]})]})});function oe(){return new URLSearchParams(O().search)}const he=()=>{const[s,x]=i.useState([]),[u,g]=i.useState([]),f=oe().get("instituicao"),[n,E]=i.useState(f),[R,D]=i.useState(!0);i.useEffect(()=>{(async()=>{try{const[a,p]=await Promise.all([b.get("/blog/posts/"),b.get("/map-markers/")]);console.log(" ⋙⇌⇌⇌⇌⇌⇌⇌⇌⇌⇌⇌⇌⇌⇌⇌⫸"),console.log("postsResponse:",a.data);const r=[...a.data].sort((N,$)=>N.instituicao_nome===null&&$.instituicao_nome!==null?-1:N.instituicao_nome!==null&&$.instituicao_nome===null?1:0);x(r),g(p.data)}catch(a){console.error("Falha ao carregar dados do blog:",a)}finally{D(!1)}})()},[]);const m=i.useMemo(()=>n?u.find(t=>t.nome===n):null,[u,n]),{postsParaExibir:y,indiceSeparador:C}=i.useMemo(()=>{if(n)return{postsParaExibir:s.filter(r=>r.instituicao_nome===n),indiceSeparador:-1};const t=s.filter(r=>r.instituicao_nome===null),a=s.filter(r=>r.instituicao_nome!==null),p=t.length>0&&a.length>0;return{postsParaExibir:[...t,...a],indiceSeparador:p?t.length:-1}},[s,n]),o=y[0],q=y.slice(1);return R?e.jsx(d,{justify:"center",align:"center",className:"h-96",children:e.jsx(G,{size:"3"})}):e.jsxs("div",{className:"p-4 sm:p-8 max-w-7xl mx-auto",children:[e.jsx(h,{size:"9",mt:"4",mb:"8",align:"center",className:"text-gray-800",children:"Notícias"}),o&&e.jsx(j,{to:`/blog/${o.id}`,className:"no-underline text-current",children:e.jsx(v,{size:"5",mb:"8",className:"group overflow-hidden",children:e.jsxs(d,{direction:{initial:"column",md:"row"},gap:"6",align:"center",children:[e.jsx(l,{className:"w-full md:w-3/5",children:e.jsx(I,{ratio:16/9,children:e.jsx("img",{src:o.imagem_destaque||"...",alt:o.title,className:"w-full h-full object-contain rounded-xl group-hover:scale-105 transition-transform duration-300"})})}),e.jsxs(l,{className:"w-full md:w-2/5",children:[e.jsx(c,{size:"2",color:"jade",weight:"bold",mb:"2",children:o.instituicao_nome||"INCITE AF"}),e.jsx(h,{as:"h2",size:{initial:"6",md:"8"},mt:"1",children:o.title}),e.jsx(c,{as:"p",size:"3",color:"gray",mt:"3",children:o.resumo})]})]})})}),e.jsxs(d,{gap:{initial:"6",md:"8"},direction:{initial:"column-reverse",md:"row"},children:[e.jsx(S,{columns:{initial:"1",sm:"2",md:"3"},gap:"6",className:"flex-1",children:q.map((t,a)=>{const r=a+1===C;return e.jsxs(M.Fragment,{children:[r&&e.jsx(l,{className:"col-span-1 sm:col-span-2 md:col-span-3 my-4",children:e.jsx(d,{direction:"column",gap:"3",align:"center",children:e.jsx(U,{color:"jade",size:"4",style:{height:"2px",width:"80%"}})})}),e.jsx(ne,{post:t})]},t.id)})}),e.jsxs(l,{width:{initial:"100%",md:"w-1/3"},className:"sticky top-24 self-start",children:[e.jsx(h,{size:"4",mb:"4",children:"Explorar por Instituição"}),e.jsxs(Q,{size:"3",value:n||"all",onValueChange:t=>{E(t==="all"?null:t)},children:[e.jsx(H,{variant:"soft",placeholder:"Selecione uma instituição..."}),e.jsx(J,{variant:"soft",position:"popper",children:e.jsxs(K,{children:[e.jsx(W,{children:"Instituições"}),e.jsx(z,{value:"all",children:"Todas as Postagens"}),u.map(t=>e.jsx(z,{value:t.nome,children:e.jsx(c,{size:"2",children:t.nome})},t.id))]})})]}),m&&e.jsx(v,{variant:"ghost",mt:"5",children:m.marcador_logo&&e.jsx(j,{to:`/instituicao/${m.id}`,children:e.jsx("img",{src:m.marcador_logo,alt:`${m.nome} logo`,className:" w-[130px] h-auto rounded cursor-pointer transition-transform duration-200 hover:scale-105"})})})]})]})]})};export{he as default};
